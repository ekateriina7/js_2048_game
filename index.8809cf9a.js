class t{static INITIAL_STATE=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];constructor(e=t.INITIAL_STATE){this.initialState=e.map(t=>[...t]),this.state=e.map(t=>[...t]),this.status="idle",this.score=0}moveLeft(){this.moveHorizontal(!1)}moveRight(){this.moveHorizontal(!0)}moveUp(){this.moveVertical(!1)}moveDown(){this.moveVertical(!0)}getScore(){return this.score}getState(){return this.state}getStatus(){return this.status}start(){this.setBoard(),this.setStatus("playing")}restart(){this.state=this.initialState.map(t=>[...t]),this.status="idle",this.score=0}setBoard(){this.addRandomNumber(),this.addRandomNumber()}setScore(t){this.score+=t}setStatus(t){this.status=t}setState(t){this.state=t}addRandomNumber(t=null,e=null,s=null){let r=[];for(let t=0;t<4;t++)for(let e=0;e<4;e++)0===this.state[t][e]&&r.push({row:t,col:e});if(r.length){let i=Math.floor(Math.random()*r.length),a=r[i],o=null!==t?t:a.row,l=null!==e?e:a.col;this.state[o][l]=null!==s?s:.9>Math.random()?2:4}}combine(t){let e=[],s=0,r=!1;for(let i=0;i<t.length;i++){if(r){r=!1;continue}0!==t[i]&&(t[i]===t[i+1]?(e.push(2*t[i]),s+=2*t[i],r=!0):e.push(t[i]))}for(;e.length<4;)e.push(0);return this.setScore(s),e}moveHorizontal(t=!1){if("playing"!==this.status)return;let e=!1;for(let s=0;s<4;s++){let r=[...this.state[s]];t&&r.reverse();let i=this.combine(r);t&&i.reverse(),this.state[s].toString()!==i.toString()&&(e=!0),this.state[s]=i}e&&(this.addRandomNumber(),this.checkWin()?this.setStatus("win"):this.checkLose()&&this.setStatus("lose"))}moveVertical(t=!1){if("playing"!==this.status)return;let e=!1;for(let s=0;s<4;s++){let r=[];for(let t=0;t<4;t++)r.push(this.state[t][s]);t&&r.reverse();let i=this.combine(r);t&&i.reverse();for(let t=0;t<4;t++)this.state[t][s]!==i[t]&&(e=!0),this.state[t][s]=i[t]}e&&(this.addRandomNumber(),this.checkWin()?this.setStatus("win"):this.checkLose()&&this.setStatus("lose"))}checkWin(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(2048===this.state[t][e])return!0;return!1}checkLose(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(0===this.state[t][e]||e<3&&this.state[t][e]===this.state[t][e+1]||t<3&&this.state[t][e]===this.state[t+1][e])return!1;return!0}}const e=new t,s=document.querySelector(".button.start"),r=document.querySelector(".message-container"),i=document.querySelector(".game-score"),a=()=>{let t=e.getState(),s=document.querySelectorAll(".field-row");for(let e=0;e<t.length;e++){let r=t[e],i=s[e].querySelectorAll(".field-cell");for(let t=0;t<r.length;t++){let e=r[t],s=i[t];e?(s.innerHTML=e,s.className=`field-cell field-cell--${e}`):(s.innerHTML="",s.className="field-cell")}}},o=()=>{let t=e.getStatus(),s="",i="";"idle"===t?(s='Press "Start" to begin game. Good luck!',i="message-start"):"playing"===t?(s="",i="hidden"):"win"===t?(s="Winner! Congrats! You did it!",i="message-win"):"lose"===t&&(s="You lose! Restart the game?",i="message-lose"),r.innerHTML=`<p class="message ${i}">${s}</p>`},l=()=>{i.innerHTML=e.getScore()};s.addEventListener("click",()=>{"idle"===e.getStatus()||e.restart(),e.start(),a(),l(),o(),s.textContent="Restart",s.className="button restart"}),document.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight();break;case"ArrowUp":e.moveUp();break;case"ArrowDown":e.moveDown();break;default:return}l(),o(),a()});
//# sourceMappingURL=index.8809cf9a.js.map
